<!DOCTYPE html>
<html>
<head>
  <title>Draw Your Smile üé®</title>
  <style>
    body {
      font-family: sans-serif;
      text-align: center;
      padding: 1rem;
    }
    canvas {
      border: 2px solid #ccc;
      border-radius: 10px;
      touch-action: none;
      margin-bottom: 1rem;
    }
    button {
      margin: 0.5rem;
      padding: 10px 20px;
      font-size: 1rem;
      border: none;
      border-radius: 6px;
      cursor: pointer;
    }
    .next {
      background-color: #28a745;
      color: white;
    }
    .clear {
      background-color: #ffc107;
    }
    .exit {
      position: absolute;
      top: 10px;
      left: 15px;
      font-size: 1.5rem;
      text-decoration: none;
      color: #dc3545;
    }
    .back {
      position: absolute;
      bottom: 10px;
      left: 15px;
      font-size: 1.2rem;
      text-decoration: none;
      color: #007bff;
    }
  </style>
</head>
<body>

<a href="exit.html" class="exit">‚úñ</a>

<h2>No worries, draw instead üé®</h2>

<canvas id="drawCanvas" width="320" height="240"></canvas><br>

<button class="clear" onclick="clearCanvas()">üßº Clear</button>
<button class="next" onclick="goToText()">Next ‚û°Ô∏è</button>

<a href="intro.html" class="back">‚Üê Back</a>

<script>
  const canvas = document.getElementById('drawCanvas');
  const ctx = canvas.getContext('2d');
  let drawing = false;

  canvas.addEventListener('mousedown', () => drawing = true);
  canvas.addEventListener('mouseup', () => drawing = false);
  canvas.addEventListener('mousemove', draw);
  canvas.addEventListener('touchstart', e => {
    drawing = true;
    draw(e.touches[0]);
  });
  canvas.addEventListener('touchend', () => drawing = false);
  canvas.addEventListener('touchmove', e => draw(e.touches[0]));

  function draw(e) {
    if (!drawing) return;
    const rect = canvas.getBoundingClientRect();
    ctx.fillStyle = "#000";
    ctx.beginPath();
    ctx.arc(e.clientX - rect.left, e.clientY - rect.top, 3, 0, Math.PI * 2);
    ctx.fill();
  }

  function clearCanvas() {
    ctx.clearRect(0, 0, canvas.width, canvas.height);
  }

  function goToText() {
    const pixels = ctx.getImageData(0, 0, canvas.width, canvas.height).data;
    const drawn = pixels.some(p => p !== 0);
    if (!drawn) {
      alert("Draw a smile first! üòä");
    } else {
      location.href = "reason.html";
    }
  }
</script>

</body>
</html>
