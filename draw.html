<script>
  const canvas = document.getElementById('draw');
  const ctx = canvas.getContext('2d');
  let drawing = false;

  canvas.onmousedown = () => drawing = true;
  canvas.onmouseup = () => drawing = false;
  canvas.onmousemove = e => {
    if (!drawing) return;
    ctx.lineTo(e.offsetX, e.offsetY);
    ctx.stroke();
  };

  function checkSmileDrawing() {
    const imageData = ctx.getImageData(0, 100, 320, 100).data;
    let drawnPixels = 0;
    for (let i = 0; i < imageData.length; i += 4) {
      if (imageData[i + 3] > 0) drawnPixels++; // alpha > 0
    }

    if (drawnPixels < 300) {
      alert("Draw a smile!");
    } else {
      location.href = 'reason.html';
    }
  }
</script>

<!-- Update button: -->
<button onclick="checkSmileDrawing()">Next</button>
